(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5137)}])},5137:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r=t(5893),i=t(7564),o=t(9236),a=t(603),s=t(7294),c=t(3715),l=t(157),d=t(5117),$=t(3991),h=t(4685),u=t(6137),x=t(3411),f=t(2167);function p(e){var n=e.setMaze,t=(0,c.rZ)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.x,{size:"xl",align:"center",children:"Upload a maze to start solving it."}),(0,r.jsxs)(d.x,{size:"md",color:"dimmed",align:"center",children:["Your image will be processed ",(0,r.jsx)("strong",{children:"solely"})," in your browser and"," ",(0,r.jsx)("strong",{children:"not"})," sent anywhere."]}),(0,r.jsxs)(d.x,{size:"sm",color:"dimmed",align:"center",children:["An example of a maze can be found"," ",(0,r.jsx)(h.e,{href:"./maze.png",children:"here"}),"."]}),(0,r.jsx)(x.fh,{onDrop:function(e){return n(e[0])},multiple:!1,accept:f.d1,mt:t.spacing.sm,children:(0,r.jsxs)(u.Z,{position:"center",spacing:"xl",style:{minHeight:220,pointerEvents:"none"},children:[(0,r.jsx)(x.fh.Accept,{children:(0,r.jsx)($.bCE,{size:50,stroke:1.5,color:t.colors[t.primaryColor]["dark"===t.colorScheme?4:6]})}),(0,r.jsx)(x.fh.Reject,{children:(0,r.jsx)($.kLi,{size:50,stroke:1.5,color:t.colors.red["dark"===t.colorScheme?4:6]})}),(0,r.jsx)(x.fh.Idle,{children:(0,r.jsx)($.m1R,{size:50,stroke:1.5})}),(0,r.jsx)(d.x,{size:"xl",inline:!0,children:"Drag your image of a maze here"})]})})]})}var m=t(6869);function g(e,n){var t=Math.min(Math.min(e.canvas.width/n.width,e.canvas.height/n.height),1),r=(e.canvas.width-n.width*t)/2,i=(e.canvas.height-n.height*t)/2,o=Math.floor(n.width*t),a=Math.floor(n.height*t);return e.drawImage(n,0,0,n.width,n.height,r,i,o,a),[r,i,++o,++a]}function v(e,n,t){var r=e.getBoundingClientRect(),i=t.clientX-r.left,o=t.clientY-r.top;return n.getImageData(i,o,1,1).data}function _(e,n){return Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2)}function j(e,n,t,r,i){var o=(e+n*t)*4;r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2]}function w(e,n,t,r,i){for(var o=-1;o<=1;++o)for(var a=-1;a<=1;++a)j(e+o,n+a,t,r,i);j(e+2,n,t,r,i),j(e-2,n,t,r,i),j(e,n+2,t,r,i),j(e,n-2,t,r,i)}function b(e,n,t,r,i,o){return e<0||n<0||e>=t||n>=r?o:26==i[(e+n*t)*4]}function k(e,n,t,r){for(var i=0;i<r.length;i+=4){var o=r.slice(i,i+3);_(e,o)<_(n,o)?(r[i]=11,r[i+1]=69,r[i+2]=103,r[i+3]=t):(r[i]=26,r[i+1]=27,r[i+2]=30,r[i+3]=255)}}function z(e,n,t,r){for(;r;){for(var i=new Uint8ClampedArray(t),o=0;o<n;++o)for(var a=0;a<e;++a){for(var s=!0,c=-1;c<=1;++c)for(var l=-1;l<=1;++l)s&&(s=b(a+l,o+c,e,n,i,!0));var d=(a+o*e)*4;s||(t[d]=11,t[d+1]=69,t[d+2]=103)}--r}}function C(e,n,t,r){for(;r;){for(var i=new Uint8ClampedArray(t),o=0;o<n;++o)for(var a=0;a<e;++a){for(var s=!1,c=-1;c<=1;++c)for(var l=-1;l<=1;++l)s||(s=b(a+l,o+c,e,n,i,!1));var d=(a+o*e)*4;s&&(t[d]=26,t[d+1]=27,t[d+2]=30)}--r}}function y(e){var n=e.canvasRef;return(0,r.jsx)("canvas",{ref:n,width:.75*window.innerWidth,height:480})}function S(e){var n=e.img,t=e.pwColor,i=e.setPWColor,o=e.nextStep,a=(0,c.rZ)(),l=(0,s.useRef)(null);return(0,s.useEffect)(function(){var e=l.current,r=null==e?void 0:e.getContext("2d"),o=new Image;o.src=URL.createObjectURL(n),e&&r&&(o.onload=function(){var n=g(r,o),a=r.getImageData(n[0],n[1],n[2],n[3]),s=a.data;e.onclick=function(n){return i({path:v(e,r,n),wall:t.wall})},e.oncontextmenu=function(n){n.preventDefault(),i({path:t.path,wall:v(e,r,n)})},t.path&&t.wall&&k(t.path,t.wall,255,s),r.putImageData(a,n[0],n[1])})},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{canvasRef:l}),(0,r.jsx)(d.x,{size:"xl",align:"center",children:"Select the walkable path using left click and the wall using right click."}),(0,r.jsxs)(d.x,{size:"md",color:"dimmed",align:"center",children:["Use the clear button to reset the image and do this until there is a clear distinction between the path (blue) and the walls (grey).",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"The lines do not need to be perfect."})]}),(0,r.jsxs)(u.Z,{position:"center",mt:a.spacing.sm,children:[(0,r.jsx)(m.z,{variant:"outline",onClick:function(){return i({path:void 0,wall:void 0})},children:"Clear"}),(0,r.jsx)(m.z,{disabled:!(t.path&&t.wall),variant:"gradient",onClick:o,children:"Next"})]})]})}var Z=t(4924),D=t(6042),R=t(9396),E=t(6817),I=t(9094),M=t(2445),U=t(5948),L=(0,E.k)(function(e){return{item:(0,R.Z)((0,D.Z)({},e.fn.focusStyles()),{display:"flex",alignItems:"center",borderRadius:e.radius.md,border:"1px solid ".concat(e.colors.dark[5]),padding:"".concat(e.spacing.xs,"px ").concat(e.spacing.xs,"px"),backgroundColor:e.colors.dark[5],marginBottom:e.spacing.sm}),itemDragging:{boxShadow:e.shadows.sm},itemMuted:{backgroundColor:e.colors.muted[6],border:"1px solid ".concat(e.colors.muted[6])}}});function N(e){var n=e.img,t=e.pwColor,i=e.morphs,o=e.morphHandlers,a=e.nextStep,l=e.prevStep,$=(0,c.rZ)(),h=L(),x=h.classes,f=h.cx,p=(0,s.useRef)(null);(0,s.useEffect)(function(){var e=p.current,r=null==e?void 0:e.getContext("2d"),o=new Image;o.src=URL.createObjectURL(n),e&&r&&(o.onload=function(){var e=g(r,o),n=r.getImageData(e[0],e[1],e[2],e[3]),a=n.data;if(!t.path||!t.wall||!a){console.error("Step 1 must be completed first");return}k(t.path,t.wall,255,a);var s=!0,c=!1,l=void 0;try{for(var d,$=i[Symbol.iterator]();!(s=(d=$.next()).done);s=!0){var h=d.value;h.op(e[2],e[3],a,h.iterations)}}catch(u){c=!0,l=u}finally{try{s||null==$.return||$.return()}finally{if(c)throw l}}r.putImageData(n,e[0],e[1])})},[i]);var v=i.map(function(e,n){return(0,r.jsx)(U._l,{index:n,draggableId:e.name,children:function(n,t){var i;return(0,r.jsxs)("div",(0,R.Z)((0,D.Z)({onClick:function(){o.applyWhere(function(n){return n.id==e.id},function(e){return(0,R.Z)((0,D.Z)({},e),{iterations:e.iterations+1})})},onContextMenu:function(n){o.applyWhere(function(n){return n.id==e.id},function(e){return n.preventDefault(),(0,R.Z)((0,D.Z)({},e),{iterations:Math.max(0,e.iterations-1)})})},className:f(x.item,(i={},(0,Z.Z)(i,x.itemDragging,t.isDragging),(0,Z.Z)(i,x.itemMuted,0!=e.iterations),i))},n.draggableProps,n.dragHandleProps),{ref:n.innerRef,children:[(0,r.jsx)(I.M,{sx:{width:60},children:e.icon}),(0,r.jsxs)(u.Z,{position:"apart",sx:{width:"100%"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.x,{children:e.name}),(0,r.jsx)(d.x,{color:"dimmed",size:"sm",children:e.description})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.x,{size:"sm",children:"Iterations"}),(0,r.jsx)(d.x,{color:"dimmed",size:"xs",align:"center",children:e.iterations})]})]})]}))}},e.name)});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{canvasRef:p}),(0,r.jsx)(d.x,{size:"xl",align:"center",children:"Drag and drop different morphological operators to make the distinction more clear."}),(0,r.jsxs)(d.x,{size:"md",color:"dimmed",align:"center",children:["Left click to increase and right click to decrease the amount of iterations. ",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Make sure that there are no gaps between walls."})]}),(0,r.jsxs)(u.Z,{position:"center",my:$.spacing.sm,children:[(0,r.jsx)(m.z,{variant:"outline",onClick:l,children:"Back"}),(0,r.jsx)(m.z,{variant:"gradient",onClick:a,children:"Next"})]}),(0,r.jsx)(U.Z5,{onDragEnd:function(e){var n=e.destination,t=e.source;return o.reorder({from:t.index,to:(null==n?void 0:n.index)||0})},children:(0,r.jsx)(M.W,{size:"xs",children:(0,r.jsx)(U.bK,{droppableId:"dnd-list",direction:"vertical",children:function(e){return(0,r.jsxs)("div",(0,R.Z)((0,D.Z)({},e.droppableProps),{ref:e.innerRef,children:[v,e.placeholder]}))}})})})]})}var O=t(8528);function P(e,n,t,r,i){return 0<=e&&e<t&&0<=n&&n<r&&26!=i[(e+n*t)*4]}function T(e){var n=e.img,t=e.pwColor,i=e.morphs,o=e.nextStep,a=e.prevStep,l=(0,c.rZ)(),$=(0,s.useState)({start:void 0,end:void 0}),h=$[0],x=$[1],f=(0,s.useRef)(null),p=(0,s.useRef)(null);return(0,s.useEffect)(function(){var e=f.current,r=null==e?void 0:e.getContext("2d"),a=p.current,s=new Image;s.src=URL.createObjectURL(n),e&&r&&(a&&(a.onclick=function(){var n=document.createElement("a");n.download="maze.png",n.href=e.toDataURL("image/png"),n.click(),o()}),s.onload=function(){var n=g(r,s),o=r.getImageData(n[0],n[1],n[2],n[3]),a=o.data;if(!t.path||!t.wall||!a){console.error("Step 1 must be completed first");return}var c=e.getBoundingClientRect();e.onclick=function(e){return x({start:[Math.floor(e.clientX-c.left-n[0]),Math.floor(e.clientY-c.top-n[1]),],end:h.end})},e.oncontextmenu=function(e){e.preventDefault(),x({start:h.start,end:[Math.floor(e.clientX-c.left-n[0]),Math.floor(e.clientY-c.top-n[1]),]})},k(t.path,t.wall,102,a);var l=!0,d=!1,$=void 0;try{for(var u,f=i[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var p=u.value;p.op(n[2],n[3],a,p.iterations)}}catch(m){d=!0,$=m}finally{try{l||null==f.return||f.return()}finally{if(d)throw $}}h.start&&(h.end&&function(e,n,t,r,i){for(var o,a=[e],s={};o=a.shift();){var c=o[0],l=o[1];if(c==n[0]&&l==n[1]){for(var d=s["".concat(c,",").concat(l)];d[0]!=e[0]||d[1]!=e[1];){var $=(d[0]+d[1]*t)*4;i[$]=255,i[$+1]=146,i[$+2]=43,d=s["".concat(d[0],",").concat(d[1])]}return}for(var h=-1;h<=1;++h)for(var u=-1;u<=1;++u){var x=c+h,f=l+u;!s["".concat(x,",").concat(f)]&&P(x,f,t,r,i)&&(a.push([x,f]),s["".concat(x,",").concat(f)]=[c,l],i[(x+f*t)*4+3]=255)}}}(h.start,h.end,n[2],n[3],a),w(h.start[0],h.start[1],n[2],a,new Uint8ClampedArray([108,212,237]))),h.end&&w(h.end[0],h.end[1],n[2],a,new Uint8ClampedArray([108,212,237])),r.putImageData(o,n[0],n[1])})},[h]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{canvasRef:f}),(0,r.jsx)(d.x,{size:"xl",align:"center",children:"Left click your start and right click your end position."}),(0,r.jsx)(d.x,{size:"md",color:"dimmed",align:"center",children:"Keep in mind that this operation is expensive so be patient with your device."}),(0,r.jsx)(d.x,{size:"sm",color:"dimmed",align:"center",children:"The bright path shows what is explored by the algorithm."}),(0,r.jsxs)(u.Z,{position:"center",my:l.spacing.sm,children:[(0,r.jsx)(m.z,{variant:"outline",onClick:a,children:"Back"}),(0,r.jsx)(m.z,{variant:"gradient",ref:p,children:"Download"})]})]})}var B=[{id:0,name:"Erode",icon:(0,r.jsx)($.rGG,{}),description:"Thins the walls",iterations:0,op:z},{id:1,name:"Dilate",icon:(0,r.jsx)($.ybr,{}),description:"Thickens the walls",iterations:0,op:C},{id:2,name:"Open",icon:(0,r.jsx)($.cCS,{}),description:"Erodes then dilates",iterations:0,op:function(e,n,t,r){z(e,n,t,r),C(e,n,t,r)}},{id:3,name:"Close",icon:(0,r.jsx)($.f4m,{}),description:"Dilates then erodes",iterations:0,op:function(e,n,t,r){C(e,n,t,r),z(e,n,t,r)}},];function F(){(0,c.rZ)();var e=(0,s.useState)(0),n=e[0],t=e[1],i=(0,s.useState)(void 0),o=i[0],h=i[1],u=(0,s.useState)({path:void 0,wall:void 0}),x=u[0],f=u[1],m=(0,a.Z)((0,O.n)(B),2),g=m[0],v=m[1],_=function(){return t(function(e){return e<4?e+1:e})},j=function(){return t(function(e){return e>0?e-1:e})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.v,{active:n,breakpoint:"sm",sx:{width:"75vw"},children:[(0,r.jsx)(l.v.Step,{icon:(0,r.jsx)($.bCE,{}),label:"Upload",description:"Upload the maze",children:(0,r.jsx)(p,{setMaze:function(e){h(e),_()}})}),(0,r.jsx)(l.v.Step,{icon:(0,r.jsx)($.QSe,{}),label:"Decolor",description:"Define walls and path",children:o&&(0,r.jsx)(S,{img:o,pwColor:x,setPWColor:f,nextStep:_})}),(0,r.jsx)(l.v.Step,{icon:(0,r.jsx)($.CBt,{}),label:"Enhance",description:"Close gaps in edges",children:o&&(0,r.jsx)(N,{img:o,pwColor:x,morphs:g,morphHandlers:v,nextStep:_,prevStep:j})}),(0,r.jsx)(l.v.Step,{icon:(0,r.jsx)($.KhO,{}),label:"Solve",description:"Find path from start to end",children:o&&(0,r.jsx)(T,{img:o,pwColor:x,morphs:g,nextStep:_,prevStep:j})}),(0,r.jsxs)(l.v.Completed,{children:[(0,r.jsx)(d.x,{size:"xl",align:"center",children:"Thanks for using MAZErick."}),(0,r.jsx)(d.x,{size:"md",color:"dimmed",align:"center",children:"Your download should begin shortly."})]})]})})}var W=function(){return(0,r.jsxs)(i.K,{justify:"center",align:"center",children:[(0,r.jsx)(o.D,{children:"MAZErick"}),(0,r.jsx)(F,{})]})}}},function(e){e.O(0,[630,584,929,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);